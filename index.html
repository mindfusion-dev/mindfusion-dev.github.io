<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Выбирай стиль изображения...</title>
</head>
<body>
    <div class="container">
        <div class="ai">
            <button class="btn-ai">
                <img class="pick1" id="pick1" src="img/1.gif" value="Person in 2d anime style">
                <h1>2D Аниме</h1>
            </button>
        </div>
        <div class="ai">
            <button class="btn-ai">
                <img class="pick2" id="pick2" src="img/2.gif" value="A pirate">
                <h1>Пираты</h1>
            </button>   
        </div>
        <div class="ai">
            <button class="btn-ai">
                <img class="pick4" id="pick4" src="img/4.gif" value="a black and white, gothic, comics style">
                <h1>Темная готика</h1>
            </button>  
        </div>
        <div class="ai">
        <button class="btn-ai">
            <img class="pick4" id="pick7" src="img/cyberp.gif" value="cyberpunk 2077 style">
            <h1>Киберпанк</h1>
        </button>  
        </div>
        <div class="ai">
        <button class="btn-ai">
            <img class="pick4" id="pick8" src="img/zf.gif" value="a person in toriyama akira anime style">
            <h1>Z Fighters</h1>
        </button>  
        </div>
        <div class="ai">
        <button class="btn-ai">
            <img class="pick2" id="pick9" src="img/elf.gif" value="(Lord of the Realm),(Royal regalia),(Golden crown),(Ornate cape),(Jeweled scepter),(Regal attire),(Lord's castle),(Throne room),(Courtiers),(Loyal subjects),(Knight in armor),(Banner of the realm),(Great hall),(Tapestry),(Feast table),(Grand staircase),(Crest of the realm),(Enchanted forest),(Majestic mountains)">
            <h1>Lord of the Realm</h1>
        </button>  
        </div>
        <div class="ai">
        <button class="btn-ai">
            <img class="pick1" id="pick17" src="img/avatar.gif" value="Avatar(2009) movie style">
            <h1>Аватар</h1>
        </button>  
        </div>
</div>
<div class="container">
    <div class="ai">
        <button class="btn-ai">
            <img class="pick4" id="pick13" src="img/bikini.gif" value="a person anime bikini girl style">
            <h1>Бикини Girl</h1>
        </button>  
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick3" id="pick3" src="img/3.gif" value="A person in ghibli studio anime style">
            <h1>Унисенные призраками</h1>
        </button>
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick4" id="pick14" src="img/vampire killer.gif" value="kimetsu no yaiba anime style">
            <h1>Убийца Вампиров</h1>
        </button>  
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick1" id="pick16" src="img/naruto.gif" value="a pesrson in naruto style, a ninja">
            <h1>Наруто</h1>
        </button>
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick1" id="pick34" src="img/apirate.gif" value="a person in One Piece anime style">
            <h1>Аниме-Пираты</h1>
        </button>
    </div>
</div>
<div class="container">
    <div class="ai">
        <button class="btn-ai">
            <img class="pick1" id="pick27" src="img/eg.gif" value="egyptian pharaoh, ancient egyptian style">
            <h1>Египет</h1>
        </button>   
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick1" id="pick28" src="img/g.gif" value="a person in dark gothic style">
            <h1>Готика</h1>
        </button>   
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick1" id="pick32" src="img/barbie.gif" value="a blonde person in Barbie movie style">
            <h1>Барби</h1>
        </button>   
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick1" id="pick33" src="img/ws.gif" value="cowboy in a hat">
            <h1>Вестерн</h1>
        </button>   
    </div>
</div>               
<div class="container">
    <div class="ai">
        <button class="btn-ai">
            <img class="pick3" id="pick25" src="img/Marvel.gif" value="marvel superhero in comics painting style">
            <h1>Marvel Comix</h1>
        </button>  
    </div>
    <div class="ai">
        <button class="btn-ai">
            <img class="pick2" id="pick26" src="img/ac.gif" value="american comics painting style">
            <h1>American Comix</h1>
        </button>  
    </div>                 
</div>
            <script src="https://telegram.org/js/telegram-web-app.js"></script>
            <script>
                function sendRequest(userId, value) {
                    let xhr = new XMLHttpRequest();
                    url = 'https://oneai.ru:8080/user-pick?user_id=' + userId + '&value=' + encodeURIComponent(value);
                    xhr.open('GET', url, true);
                    xhr.onload = () => {
                        setTimeout(function() {
                            tg.close();
                          }, 1000);
                      };
                    xhr.send(null);
                    console.log(xhr.status)
                    console.log(url)
                    console.log('sent')
                }
                function changeItem() {
                    document.getElementById('head').style.top="62px";
                  }
                window.onscroll = function(){
                    changeItem();
                  }

                const buttons = document.querySelectorAll("button");
                buttons.forEach(button => {
                button.addEventListener("click", event => {
                    buttons.forEach(b => b.classList.remove("selected"));
                    event.target.classList.toggle("selected");
                    changeItem();
                });
                });

                let tg = window.Telegram.WebApp;
                userId = tg.initDataUnsafe.user.id;
                tg.expand();

                let pick1 = document.getElementById("pick1");
                let pick2 = document.getElementById("pick2");
                let pick3 = document.getElementById("pick3");
                let pick4 = document.getElementById("pick4");
                let pick7 = document.getElementById("pick7");
                let pick8 = document.getElementById("pick8");
                let pick9 = document.getElementById("pick9");
                let pick13 = document.getElementById("pick13");
                let pick14 = document.getElementById("pick14");
                let pick16 = document.getElementById("pick16");
                let pick17 = document.getElementById("pick17");
                let pick25 = document.getElementById("pick25");
                let pick26 = document.getElementById("pick26");
                let pick27 = document.getElementById("pick27");
                let pick28 = document.getElementById("pick28");
                let pick33 = document.getElementById("pick33");
                let pick32 = document.getElementById("pick32");
                let pick34 = document.getElementById("pick34");

                pick1.addEventListener("click", () => {
                    console.log(pick1.getAttribute('value'));
                    sendRequest(userId, pick1.getAttribute('value'));
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick2.addEventListener("click", () => {
                    console.log(pick2.getAttribute('value'))
                    sendRequest(userId, pick2.getAttribute('value'));
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick3.addEventListener("click", () => {
                    console.log(pick3.getAttribute('value'));
                    sendRequest(userId, pick3.getAttribute('value'));
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick4.addEventListener("click", () => {
                    console.log(pick4.getAttribute('value'));
                    sendRequest(userId, pick4.getAttribute('value'));
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick7.addEventListener("click", () => {
                    console.log(pick7.getAttribute('value'));
                    sendRequest(userId, pick7.getAttribute('value'));
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick8.addEventListener("click", () => {
                    console.log(pick8.getAttribute('value'));
                    sendRequest(userId, pick8.getAttribute('value'));
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick9.addEventListener("click", () => {
                    console.log(pick9.getAttribute('value'));
                    sendRequest(userId, pick9.getAttribute('value'));
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick13.addEventListener("click", () => {
                    console.log(pick13.getAttribute('value'));
                    sendRequest(userId, pick13.getAttribute('value'));                
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick14.addEventListener("click", () => {
                    console.log(pick14.getAttribute('value'));
                    sendRequest(userId, pick14.getAttribute('value'));                    
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick16.addEventListener("click", () => {
                    console.log(pick16.getAttribute('value'));
                    sendRequest(userId, pick16.getAttribute('value'));                    
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick17.addEventListener("click", () => {
                    console.log(pick17.getAttribute('value'));
                    sendRequest(userId, pick17.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick25.addEventListener("click", () => {
                    console.log(pick25.getAttribute('value'));
                    sendRequest(userId, pick25.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick26.addEventListener("click", () => {
                    console.log(pick26.getAttribute('value'));
                    sendRequest(userId, pick26.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick27.addEventListener("click", () => {
                    console.log(pick27.getAttribute('value'));
                    sendRequest(userId, pick27.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick28.addEventListener("click", () => {
                    console.log(pick28.getAttribute('value'));
                    sendRequest(userId, pick28.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick33.addEventListener("click", () => {
                    console.log(pick33.getAttribute('value'));
                    sendRequest(userId, pick33.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick32.addEventListener("click", () => {
                    console.log(pick32.getAttribute('value'));
                    sendRequest(userId, pick32.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
                pick34.addEventListener("click", () => {
                    console.log(pick34.getAttribute('value'));
                    sendRequest(userId, pick34.getAttribute('value'));                   
                    setTimeout(function() {
                        tg.close();
                      }, 1000);
                });
            </script>
    </div>
</body>
</html>